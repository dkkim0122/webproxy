**02. κΈ€λ΅λ² IP μΈν„°λ„·**
===


> internet μ¤‘ ν•λ‚λ΅, internetμ„ κ°€μ¥ μ„±κ³µμ μΌλ΅ κµ¬ν„ν• μμ‹ μ¤‘ ν•λ‚λ‹¤.
> 

<br>

**TCP/IP ν”„λ΅ν† μ½μ μΆ…λ¥**
---

π’΅ κ° μΈν„°λ„· νΈμ¤νΈλ” TCP/IP ν”„λ΅ν† μ½μ„ κµ¬ν„ν• μ†ν”„νΈμ›¨μ–΄λ¥Ό μ‚¬μ©ν•λ‹¤.


- **IP**
    
    > κΈ°λ³Έ λ…λ…λ²•κ³Ό λ°μ΄ν„°κ·Έλ¨μ΄λΌλ” ν¨ν‚·μ„ **νΈμ¤νΈμ—μ„ νΈμ¤νΈλ΅** μ „λ‹¬ν•λ” λ°°λ‹¬ λ©”μ»¤λ‹μ¦μ„ μ κ³µν•λ‹¤.
    > 
    
    λ°μ΄ν„°κ·Έλ¨μ„ μƒμ–΄λ²„λ¦¬κ±°λ‚ μ¤‘λ³µλλ” κ²½μ°μ— μ•„λ¬΄κ²ƒλ„ ν•μ§€ μ•λ”λ‹¤. μ¦‰, λΉ„μ•μ •μ μ΄λ‹¤.
    
- **UDP**
    
    > IPλ¥Ό λ” ν™•μ¥ν•΄μ„, λ°μ΄ν„°κ·Έλ¨μ„ **ν”„λ΅μ„Έμ¤μ—μ„ ν”„λ΅μ„Έμ¤λ΅** λ°°λ‹¬ν•μ§€λ§ μ—­μ‹ λΉ„μ•μ •μ μ΄λ‹¤.
    > 
- **TCP**
    
    > IPλ¥Ό λ” ν™•μ¥ν•΄μ„ ν”„λ΅μ„Έμ¤μ—μ„ ν”„λ΅μ„Έμ¤λ΅ **μ•μ „ν• μ™„μ „ μ–‘λ°©ν–¥ μ—°κ²°**μ„ μ κ³µν•λ‹¤.
    > 
    - νλ¦„ μ μ–΄
        
        λ³΄λ‚Έ λ°μ΄ν„°κ·Έλ¨λ“¤μ΄ μμ„λ€λ΅ λ“¤μ–΄κ° μ μλ‹¤.
        
    - μ¤λ¥ μ μ–΄
        
<br>

π’΅ νΈμ¤νΈμ μ‘μ© ν”„λ΅κ·Έλ¨(μΈν„°λ„· ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ λ“±)μ€ **μ†μΌ“ μΈν„°νμ΄μ¤**λ¥Ό ν†µν•΄ TCP/IP ν”„λ΅ν† μ½μ„ μ΄μ©ν•λ‹¤.


<p align = 'center'>
<img src = "https://user-images.githubusercontent.com/93521799/146637274-6eca0d55-d717-493e-aecf-5977095416f6.png" width = "550">
</p>
<p align = 'center'>
<em>νΈμ¤νΈ Aμ—μ„ λ‹¤λ¥Έ LANμ νΈμ¤νΈ Bλ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” κ³Όμ •.</em>
</p>

<br>

**IP μ£Όμ†**
===

- **νΈμ¤νΈ**λ“¤μ€ κ°μ **κ³ μ μ 32λΉ„νΈ IP μ£Όμ†**μ— λ§µν•‘λλ‹¤. 32λΉ„νΈ μ£Όμ†λ¥Ό μ΄μ©ν•λ” IPλ¥Ό **IPv4**λΌ ν•λ‹¤.
    - μμ‹ : Local host 127.0.1.1
    - IPv6λ” 128λΉ„νΈμ μ£Όμ†λ¥Ό κ°–λ”λ‹¤.
- κ° IP μ£Όμ†λ“¤μ€ μΈν„°λ„· λ„λ©”μΈ λ„¤μ„μ΄λΌλ” μ‹λ³„μμ— λ§µν•‘λλ‹¤.
- ν•λ‚μ μΈν„°λ„· νΈμ¤νΈ μ•μ ν”„λ΅μ„Έμ¤λ“¤μ€ λ‹¤λ¥Έ μΈν„°λ„· νΈμ¤νΈλ“¤κ³Ό **μ—°κ²°**μ„ ν†µν•΄ ν†µμ‹ ν•λ‹¤.

<br>

**in_addr struct**
---

> **32λΉ„νΈ**μ IP μ£Όμ†λ“¤μ€ **λ„¤νΈμ›ν¬ λ°”μ΄νΈ μμ„(λΉ… μ—”λ””μ•)λ€λ΅** IP μ£Όμ† **κµ¬μ΅°μ²΄μ— μ €μ¥**λλ‹¤.
> 

π’΅ νΈμ¤νΈλ“¤μ΄ λ©”λ¨λ¦¬μ— λ°”μ΄νΈλ¥Ό μ €μ¥ν•λ” λ°©μ‹**(νΈμ¤νΈ λ°”μ΄νΈ μμ„)**μ΄ μ„λ΅ λ‹¤λ¥Ό μ μλ‹¤. **IP μ£Όμ† κµ¬μ΅°μ²΄μ μ£Όμ†λ”** νΈμ¤νΈ λ°”μ΄νΈ μμ„μ— μƒκ΄€μ—†μ΄ **λ λ„¤νΈμ›ν¬ λ°”μ΄νΈ μμ„λ΅ μ €μ¥**λλ‹¤.

<br>

**Unix μ΄μμ²΄μ μ—μ„ μ κ³µν•΄μ£Όλ” λ„¤νΈμ›ν¬μ™€ νΈμ¤νΈ λ°”μ΄νΈ μμ„κ°„μ λ³€ν™ ν•¨μλ“¤**

> 64λΉ„νΈ κ°’μ— λ€ν• ν•¨μλ” μ—†λ‹¤! ν•„μ”ν•λ©΄ μ§μ ‘ κµ¬ν„.
> 

```python
#include <arpa/inet.h>

/* νΈμ¤νΈ -> λ„¤νΈμ›ν¬ */
uint32_t htol(uint32_t hostlong);
uint16_t htos(uint16_t hostshort);

/* λ„¤νΈμ›ν¬ -> νΈμ¤νΈ */
uint32_t ntol(uint32_t netlong);
uint16_t ntos(uint16_t netshort);
```
<br>

**Dotted Decimal Notation**
---

> IP μ£Όμ†λ” λ€κ° dotted-decimal notationμΌλ΅ μ μ‹λλ‹¤. κ° λ°”μ΄νΈλ” μ‹­μ§„μ κ°’μ„ μ‚¬μ©ν•κ³ , λ‹¤λ¥Έ λ°”μ΄νΈμ™€λ” .μΌλ΅ κµ¬λ¶„λλ‹¤. **presentation μ£Όμ† λ²„μ „**μ΄λΌ λ¶€λ¥Έλ‹¤.
> 

**μμ‹**

hex μ£Όμ†  0x8002c2f2

λ³€ν™        0x80.0x02.0xc2.0xf2

D.D.N      128.2.210.175

<br>

**λ³€ν™ ν•¨μ**

- **inet_pton** : Dotted Decimal string β†’ 32λΉ„νΈ λ„¤νΈμ›ν¬ λ°”μ΄νΈ μμ„ IP μ£Όμ†
- **inet_ntop** : 32λΉ„νΈ λ„¤νΈμ›ν¬ λ°”μ΄νΈ μμ„ IP μ£Όμ† β†’ Dotted Decimal string

<br>

**Domain Naming System(DNS)**
---

> IPμ£Όμ†λ“¤μ„ λ„λ©”μΈ μ΄λ¦„μ— λ§¤ν•‘μ‹ν‚¤λ” κ±°λ€ν• λ°μ΄ν„°λ² μ΄μ¤. λ„λ©”μΈ μ΄λ¦„κ³Ό IP μ£Όμ†λ¥Ό μ„λ΅ λ³€ν™ μ‹μΌμ¤€λ‹¤.
> 
- λ΅μ»¬ λ©”λ¨λ¦¬μ μΊμ‹λ¥Ό λ“¤λ¬ μ €μ¥λμ–΄μλ” IPμ£Όμ†λ¥Ό ν™•μΈν•λ‹¤. μ—†μΌλ©΄ νΈμ¤νΈ νμΌμ—μ„ ν™•μΈν•λ‹¤. μ—†μΌλ©΄ DNS μ„λ²„μ—μ„ IPμ£Όμ†λ¥Ό μ”μ²­ν•λ‹¤.
- λ£¨ν”„λ°± μ£Όμ† **Localhost 127.0.0.1**
    
    > λ§μ•½ λ„¤νΈμ›ν¬ ν†µμ‹ μ—μ„ ν¨ν‚·μ„ μ™Έλ¶€λ΅ μ „μ†΅ν•μ§€ μ•κ³  κ³ μ¤λ€ν λ‚΄ νΈμ¤νΈλ΅ μμ‹ ν•κ³  μ‹¶μ„ λ•, λ©μ μ§€ μ£Όμ†λ¥Ό λ£¨ν”„λ°± μ£Όμ† 127.0.0.1λ΅ μ‚¬μ©ν•λ©΄ λλ‹¤.
    > 
- λ„λ©”μΈ μ΄λ¦„μ€ ν•λ‚μ IP μ£Όμ†μ— λ€ν•΄ μ—¬λ¬ κ°λ¥Ό κ°€μ§ μ μλ‹¤.
    
    ```c
    linux> nslookup cs.mit.edu
    Address: 18.62.1.6
    linux> nslookup eecs.mit.edu
    Address: 18.62.1.6
    ```
    
- μ—¬λ¬ κ°μ IP μ£Όμ†μ— λ€ν•΄ μ—¬λ¬ κ°μ λ„λ©”μΈ μ΄λ¦„μ΄ λ€μ‘λ  μλ„ μλ‹¤.
    
    ```c
    linux> nslookup www.twitter.com
    Address: 199.16.156.6
    Address: 199.16.156.70
    Address: 199.16.156.102
    Address: 199.16.156.230
    
    linux> nslookup twitter.com
    Address: 199.16.156.102
    Address: 199.16.156.230
    Address: 199.16.156.6
    Address: 199.16.156.70
    ```
    
<br>

**μΈν„°λ„· μ—°κ²°**
---

> ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” **μ—°κ²° connection**μ„ ν†µν•΄μ„ λ°”μ΄νΈ μ¤νΈλ¦Όμ„ μ£Όκ³ λ°›μΌλ©° ν†µμ‹ ν•λ‹¤.
> 

**μ†μΌ“**

- **μ—°κ²°μ μ–‘ λ μ **μ„ μλ―Έν•λ‹¤.
- μ†μΌ“μ μ£Όμ†λ” `IPaddress : port`λ΅ ν‘ν„ν•λ‹¤.
- μ—°κ²° μ–‘ λ μ μ λ‘ μ†μΌ“μ„ **μ†μΌ“ μ**μ΄λΌκ³  λ¶€λ¥΄λ©°, νν”λ΅ λ‚νƒ€λ‚Ό μ μλ‹¤.
    
    `( ClientAddress : ClientPort, ServerAddress : ServerPort )`
    

**ν¬νΈ**

- **IP λ‚΄μ—μ„ ν”„λ΅μ„Έμ¤ κµ¬λ¶„**μ„ μ„ν• **16λΉ„νΈ μ •μ**μ΄λ‹¤. κ° ν”„λ΅ν† μ½μ λ°μ΄ν„°λ” λ…Όλ¦¬μ  ν¬νΈλ¥Ό ν†µν•΄ νλ¥Έλ‹¤.
- **μ„μ‹ ν¬νΈ Ephemeral Port** : **ν΄λΌμ΄μ–ΈνΈ μ½μ ν¬νΈ**λ” μ—°κ²° μ”μ²­μ„ λ³΄λ‚Ό λ• νΈμ¤νΈμ μ»¤λ„μ΄ μλ™μΌλ΅ ν• λ‹Ήν•΄μ¤€λ‹¤.
- **μ μ•λ ¤μ§„ ν¬νΈ well-known port** : μΈν„°λ„· λ‚΄μ—μ„, **μ„λ²„ μ½μ ν¬νΈ**λ” λ€κ° **μ„λΉ„μ¤μ— λ”°λΌ** μκµ¬μ μΌλ΅ μ μ•λ ¤μ§„ ν¬νΈλ“¤μ΄ μ§€μ •λμ–΄ μλ‹¤. **κ°κ° ν¬νΈλ“¤μ€ μ΄λ¦„μ΄ μλ‹¤.**
    
    ```c
    echo server: 7/echo
    ssh servers: 22/ssh
    email server: 25/smtp
    Web servers: 80/http
    ```
    
<Br>

**μΈν„°λ„· μ—°κ²°μ κµ¬μ΅°**
---

> μΈν„°λ„· μ—°κ²°μ€ **μ—°κ²°μ μ–‘ λ μ†μΌ“ μμ— μν•΄ μ μΌν•κ² μ •ν•΄μ§„λ‹¤.**
> 

ν΄λΌμ΄μ–ΈνΈλ” **νΈμ¤νΈ μ»¤λ„μ— μν•΄ λ¶€μ—¬λ μ„μ‹ ν¬νΈ**λ¥Ό, μ„λ²„λ” **μ›Ή μ„λ²„μ΄λ―€λ΅ 80 ν¬νΈ**λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›λ”λ‹¤.

<p align = 'center'>
<img src = "https://user-images.githubusercontent.com/93521799/146637276-70455ee4-c197-4774-b419-bf2b73e73566.png" width = "550">
</p>
<p align = 'center'>
<em>νΈμ¤νΈ Aμ—μ„ λ‹¤λ¥Έ LANμ νΈμ¤νΈ Bλ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” κ³Όμ •.</em>
</p>
